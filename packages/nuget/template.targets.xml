<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="15.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
    <ItemDefinitionGroup>
        <ClCompile>
            <AdditionalIncludeDirectories>
                $(MSBuildThisFileDirectory)include;%(AdditionalIncludeDirectories)
            </AdditionalIncludeDirectories>
        </ClCompile>
    </ItemDefinitionGroup>
    <ItemDefinitionGroup Label="Debug|x64"
                         Condition="'$(Platform)' == 'x64' And $(Configuration.ToLower().IndexOf('debug')) &gt; -1">
        <Link>
            <AdditionalDependencies>
                $(MSBuildThisFileDirectory)..\..\lib\native\x64\Debug\*.lib;%(AdditionalDependencies)
            </AdditionalDependencies>
        </Link>
    </ItemDefinitionGroup>
    <ItemDefinitionGroup Label="Release|x64"
                         Condition="'$(Platform)' == 'x64' And $(Configuration.ToLower().IndexOf('debug')) == -1">
        <Link>
            <AdditionalDependencies>
                $(MSBuildThisFileDirectory)..\..\lib\native\x64\Release\*.lib;%(AdditionalDependencies)
            </AdditionalDependencies>
        </Link>
    </ItemDefinitionGroup>
    <ItemDefinitionGroup Label="Debug|Win32"
                         Condition="('$(Platform)' == 'Win32' Or '$(Platform)' == 'x86') And $(Configuration.ToLower().IndexOf('debug')) &gt; -1">
        <Link>
            <AdditionalDependencies>
                $(MSBuildThisFileDirectory)..\..\lib\native\x86\Debug\*.lib;%(AdditionalDependencies)
            </AdditionalDependencies>
        </Link>
    </ItemDefinitionGroup>
    <ItemDefinitionGroup Label="Release|Win32"
                         Condition="('$(Platform)' == 'Win32' Or '$(Platform)' == 'x86') And $(Configuration.ToLower().IndexOf('debug')) == -1">
        <Link>
            <AdditionalDependencies>
                $(MSBuildThisFileDirectory)..\..\lib\native\x86\Release\*.lib;%(AdditionalDependencies)
            </AdditionalDependencies>
        </Link>
    </ItemDefinitionGroup>
    <Target Name="AfterBuild">
        <Message Text="Copying AviationCalcUtil dependencies to the target directory..." Importance="high"/>
        <ItemGroup Condition="'$(Platform)' == 'x64' And $(Configuration.ToLower().IndexOf('debug')) &gt; -1">
            <_Dlls Include="$(MSBuildThisFileDirectory)..\..\runtimes\native\x64\Debug\**\*.*"/>
        </ItemGroup>
        <ItemGroup Condition="'$(Platform)' == 'x64' And $(Configuration.ToLower().IndexOf('debug')) == -1">
            <_Dlls Include="$(MSBuildThisFileDirectory)..\..\runtimes\native\x64\Release\**\*.*"/>
        </ItemGroup>
        <ItemGroup
                Condition="('$(Platform)' == 'Win32' Or '$(Platform)' == 'x86') And $(Configuration.ToLower().IndexOf('debug')) &gt; -1">
            <_Dlls Include="$(MSBuildThisFileDirectory)..\..\runtimes\native\x86\Debug\**\*.*"/>
        </ItemGroup>
        <ItemGroup
                Condition="('$(Platform)' == 'Win32' Or '$(Platform)' == 'x86') And $(Configuration.ToLower().IndexOf('debug')) == -1">
            <_Dlls Include="$(MSBuildThisFileDirectory)..\..\runtimes\native\x86\Release\**\*.*"/>
        </ItemGroup>
        <ItemGroup>
            <_Definitions Include="$(MSBuildThisFileDirectory)eccodes\**\*.*"/>
        </ItemGroup>
        <Copy SourceFiles="@(_Definitions)"
              DestinationFiles="@(_Definitions->'$(TargetDir)eccodes\%(RecursiveDir)%(Filename)%(Extension)')"
              UseHardlinksIfPossible="true"
              SkipUnchangedFiles="true"/>
        <Copy SourceFiles="@(_Dlls)"
              DestinationFiles="@(_Dlls->'$(TargetDir)%(RecursiveDir)%(Filename)%(Extension)')"
              UseHardlinksIfPossible="true"
              SkipUnchangedFiles="true"/>
    </Target>
</Project>